<mat-card class="mat-elevation-z8 mb-3">

    <mat-card-header>
        <mat-card-title>Generate Results</mat-card-title>
    </mat-card-header>

    <mat-card-content>
        <div class="row justify-content-center mb-2">
            <div class="col-7">
                <mat-form-field appearance="outline" >
                    <mat-label>Select Category</mat-label>
                    <mat-select [(ngModel)]="category" name="category" (selectionChange)="filterCategory(category)" >
                      <mat-option *ngFor="let category of categories" [value]="category">
                        {{category.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>

                  <mat-form-field appearance="outline" class="ml-2">
                    <mat-label>Select Position</mat-label>
                    <mat-select [(ngModel)]="position" name="position">
                      <mat-option *ngFor="let position of positions" [value]="position">
                        {{position.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
            </div>
            <div class="col-2">
                <button mat-raised-button color="primary"   (click)="fetchResults()"  [disabled]="!position"> <mat-icon>search</mat-icon> Search</button>
        
            </div>
        </div>

    </mat-card-content>
</mat-card>

<div *ngIf="results" >
    <mat-card class="mat-elevation-z8 mb-2" >

        <mat-card-header>
            <mat-card-title>{{position.name}}</mat-card-title>
        </mat-card-header>
    
        <mat-card-content>
            <div class="row">
                <div class="col-7">
                    <highcharts-chart 
                    [Highcharts]="Highcharts"
                    [options]="barChartOptions"
                  
                    style="width: 90%; height:300px; display: block;"
                  ></highcharts-chart>
                </div>
                <div class="col-5">
                  <table class="table">
                    <thead class="thead-dark">
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Name</th>
                        <th scope="col">Votes</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of positionData">
                        <td>{{item.id}}</td>
                        <td>{{item.name}}</td>
                        <td>{{item.vote}}</td>
                      </tr>
                      </tbody>
                      </table>
                </div>
            </div>
    
           
            </mat-card-content>
    </mat-card>
</div>

